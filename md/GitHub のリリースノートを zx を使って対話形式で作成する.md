---
title: GitHub ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ zx ã‚’ä½¿ã£ã¦å¯¾è©±å½¢å¼ã§ä½œæˆã™ã‚‹
date: 2023-07-04 13:51:27
---

> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [zenn.dev](https://zenn.dev/gingertoffee/articles/c3c86f64c49bc5)

[](#zx-%E3%81%8C%E5%A5%BD%E3%81%8D)zx ãŒå¥½ã
=========================================

[https://github.com/google/zx](https://github.com/google/zx)

æ¥­å‹™ã§ã¯ä¸»ã« PHP ã¨ TypeScript ã‚’æ›¸ãã“ã¨ãŒå¤šã„è‡ªåˆ†ã«ã¨ã£ã¦ã€ãŸã¾ã«å¿…è¦ã«ã‹ã‚‰ã‚Œã¦æ›¸ãã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã€æ­£ç›´ã‚ã¾ã‚Šå¥½ãã§ã¯ãªã„ã‚“ã§ã™â€¦é ­ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®åˆ‡ã‚Šæ›¿ãˆãŒå¤§å¤‰ã ã—ã€ã™ãã«ã‚°ã‚°ã‚‹è‡ªèº«ã®ä½¿ã„ã“ãªã›ã¦ã„ãªã„æ„ŸãŒã„ã¤ã¾ã§çµŒã£ã¦ã‚‚æŠœã‘ãªã„ã®ã‚‚è¾›ã„ã§ã™ğŸ˜¥

ãã‚“ãªã¨ãã«å‡ºä¼šã£ãŸ `zx` ã«ã¯å¤§å¤‰æƒšã‚Œè¾¼ã¿ã¾ã—ã¦ã€JavaScript ã§å¯¾è©±å½¢å¼ãª CLI ãƒ„ãƒ¼ãƒ«ãŒã¨ã¦ã‚‚ç°¡å˜ã«ä½œã‚Œã‚‹ã®ãŒé­…åŠ›ã§ã€ã¡ã‚‡ã£ã¨ã—ãŸã‚‚ã®ã¯å…¨ã¦ `zx` ã§æ›¸ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

[](#gh-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%8E%E3%83%BC%E3%83%88%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B)gh ã‚’ä½¿ã£ã¦ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[https://github.com/cli/cli](https://github.com/cli/cli)

è‡ªåˆ†ãŒæ‰€å±ã—ã¦ã„ã‚‹ãƒãƒ¼ãƒ ã¯ 10 äººç¨‹åº¦ã§ã€è¤‡æ•°ã® WEB ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç¤¾å†…å‘ã‘ã«é‹ç”¨ã—ã¦ã„ã¾ã™ã€‚
ãƒãƒ¼ãƒ ã«ã¯ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹æ–‡åŒ–ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã€Œã•ã¦ã€ã“ã‚Œã‹ã‚‰ã¯ä½œæˆã—ã¾ã—ã‚‡ã†ï¼ã€ã¨ã—ãŸã¨ã—ã¦ã€ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ«ã‚‚ãƒãƒ¼ãƒ ã¨ã—ã¦æŒã£ã¦ã„ãªã‹ã£ãŸã®ã§ã€å„äººãŒè‡ªç”±ã«ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ›¸ã„ã¦ã„ã‚‹ä¸­ã§ã€Œæ–°ãŸã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„ãƒ©ãƒ™ãƒ«ãƒ«ãƒ¼ãƒ«ã‚’ã“ã‚Œã‹ã‚‰æ±ºã‚ã¦ã¿ã‚“ãªã§å¾¹åº•ã—ã‚ˆã†ï¼ã€ã¨ã„ã†ã®ã¯é›£ã—ã„ãªã¨æ„Ÿã˜ã¾ã—ãŸâ€¦ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„ãƒ©ãƒ™ãƒ«ãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ã¦ã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹æ©Ÿèƒ½ãƒ»ãƒ„ãƒ¼ãƒ«ãŒã‚ˆãã‚ã‚Šã¾ã™ã‚ˆã­ï¼‰

ã§ã™ã®ã§ã€ã¨ã‚Šã‚ãˆãšã€€Pull Requestã€€ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨å®Ÿè£…è€…ã ã‘ã§ã‚‚è¨˜è¼‰ã—ãŸãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã€ã¨ä½œæˆã—ãŸã®ãŒä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚

äº‹å‰æº–å‚™ã¨ã—ã¦ã€`zx` ã¨ `gh` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

```
npm i zx gh
```

![](https://zenn.dev/images/copy-icon.svg)

`gh` ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ä»¥ä¸‹ã‚’å©ã„ã¦ã€`gh` ã®åˆæœŸè¨­å®šã‚’è¡Œã„ã¾ã™

```
gh auth login
```

![](https://zenn.dev/images/copy-icon.svg)

close ã—ãŸã€€Pull Requestã€€ã®ãƒªã‚¹ãƒˆã‚’ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã™ã®ã§ã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«æ›¸ãå‡ºã™ã‚‚ã®ã ã‘ã‚’æ®‹ã—ã¦ä¿å­˜ã—ã€ãã®ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«é£Ÿã‚ã›ã‚‹å½¢ã§ãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆãŒä½œæˆã•ã‚Œã¾ã™ã€‚`.git/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨åŒã˜éšå±¤ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã„ã¦å®Ÿè¡Œã—ã¾ã™ã€‚å¯¾è©±å¼ã«å¼•æ•°ã®å€¤ã‚’ç¢ºèªã—ãªãŒã‚‰é€²ã‚“ã§ã„ãã¾ã™ã€‚

```
#!/usr/bin/env zx
const GITHUB_URL = ''; // GH, GHE ã® URL ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
const OWNER_NAME = ''; // ãƒªãƒã‚¸ãƒˆãƒªã‚ªãƒ¼ãƒŠãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
const GITHUB_TOKEN = ''; // gh ç”¨ã«ä½œæˆã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„

// æŒ‡å®šã—ãŸãƒªãƒã‚¸ãƒˆãƒªã® PR ã‚’ã€Œtitle (#number)ã€ã§ä¸€è¦§ã‚’æ›¸ãå‡ºã™
const fetchPullRequests = async(repoName) => {
  const headers = {
    Accept: 'application/vnd.github.v3+json',
    Authorization: `token ${GITHUB_TOKEN}`
  };
  const response = await fetch(`${GITHUB_URL}api/v3/repos/${OWNER_NAME}/${repoName}/pulls?state=closed&sort=updated&direction=desc`, {headers});
  const data = await response.json();

  for(let x of data) {
    $`echo ${x.title} '(#${x.number})' by @${x.user.login} >> release_note.md`;
  }
};

// gh release ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹
const createReleaseNote = (version) => {
  console.log('æ–°è¦ã§ tag ã‚’åˆ‡ã‚Šã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã™â€¦');
  return $`gh release create ${version} -t ${version} -F release_note.md`
};

// ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
const generateReleaseNoteTempFile = () => {
  console.log('ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆç”¨ã®ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™â€¦');
  return $`vim release_note.md`
};

// ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’å‰Šé™¤ã™ã‚‹
const deleteReleaseNoteTempFile = () => {
  console.log('ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¾ã™â€¦');
  return $`rm release_note.md`
}

// å¯¾è©±å½¢å¼ã§å®Ÿè¡Œã™ã‚‹
try {
  const repository = await question('ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªåã¯? (ex: koebon)ï¼š');
  console.log(''); // è³ªå•ã®é–“ã«ç©ºè¡Œã‚’æŒŸã‚“ã§èª­ã¿ã‚„ã™ãã™ã‚‹
  await fetchPullRequests(repository);
  await generateReleaseNoteTempFile();
  console.log('');
  const version = await question('ä½œæˆã™ã‚‹ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã„ãã¤ã§ã™ã‹? (ex: v1.10.0)ï¼š');
  await createReleaseNote(version);
} finally {
  await deleteReleaseNoteTempFile();
}
console.log('');
console.log('ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼');
```

![](https://zenn.dev/images/copy-icon.svg)

ã“ã†ã„ã†ã»ã‚“ã¨ã¡ã‚‡ã£ã¨ã—ãŸã‚‚ã®ã‚’ã€ã‚µã‚¯ãƒƒã¨ä½œã‚‹ã®ã«æœ€é«˜ãªé–‹ç™ºä½“é¨“ãªã‚“ã§ã™ã‚ˆã­ğŸ¦¥
ã‚ˆã `zx` ãƒ©ã‚¤ãƒ•ã‚’ï¼
